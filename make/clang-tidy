
tidy_base_checks=*perf*,*modernize*,*misc*,*google*,*readability*,*optin*
modern_excludes=,-modernize-replace-random-shuffle,-modernize-return-braced-init-list,-modernize-use-override,-modernize-pass-by-value,-modernize-concat-nested-namespaces,-modernize-avoid-c-arrays
readability_excludes=,-readability-magic-numbers,-readability-convert-member-functions-to-static,-readability-inconsistent-declaration-parameter-name,-readability-function-size
misc_excludes=,-misc-non-private-member-variables-in-classes,-misc-unused-parameters,-misc-unused-using-decls,-misc-definitions-in-headers
google_excludes=,-google-runtime-references,-google-global-names-in-headers,-google-build-using-namespace

tidy_checks?= $(tidy_base_checks) $(modern_excludes) $(readability_excludes) $(misc_excludes) $(google_excludes)

.PHONY: clang-tidy
clang-tidy:
		find $(folder) -name '$(files).cpp' -exec clang-tidy {} -checks='$(tidy_checks)' -header-filter='./stan/*' -- $(CXXFLAGS) $(LDFLAGS) $(LDLIBS) $(INC_GTEST) $(CXXFLAGS_GTEST) $(CPPFLAGS) \;

.PHONY: clang-tidy-fix
clang-tidy-fix:
		find $(folder) -name '$(files).cpp' -exec clang-tidy {} -checks='$(tidy_checks)' -header-filter='./stan/*' -fix -fix-errors -- $(CXXFLAGS) $(LDFLAGS) $(LDLIBS) $(INC_GTEST) $(CXXFLAGS_GTEST) $(CPPFLAGS) \;
